<div class="editor-shell">

    <!-- â”€â”€ LEFT PANEL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <app-left-panel />

    <!-- â”€â”€ CENTER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <div class="editor-center">

        <!-- Top bar -->
        <header class="editor-topbar">
            <div class="editor-topbar__left">
                <span class="editor-topbar__logo">âœ¦</span>
                <span class="editor-topbar__title">{{ novelTitle() }}</span>
                @if (activeChapter()) {
                <span class="editor-topbar__sep">â€º</span>
                <span class="editor-topbar__chapter">{{ activeChapter()!.title }}</span>
                }
            </div>

            <div class="editor-topbar__actions">
                @if (hasUnsaved()) {
                <span class="editor-topbar__unsaved">â— Sin guardar</span>
                }

                <button class="btn-save" (click)="save()" [disabled]="saving() || !activeChapter()">
                    @if (saving()) { Guardando... } @else { ğŸ’¾ Guardar }
                </button>

                <div class="export-menu">
                    <button class="btn-export" [disabled]="!activeChapter()">Exportar â–¾</button>
                    <div class="export-menu__dropdown">
                        <button (click)="exportTxt()">ğŸ“„ TXT</button>
                        <button (click)="exportHtml()">ğŸŒ HTML</button>
                    </div>
                </div>

                <button class="btn-icon-sm" (click)="logout()" title="Cerrar sesiÃ³n">â»</button>
            </div>
        </header>

        <!-- Editor area -->
        <div class="editor-body">
            @if (activeChapter()) {
            <app-text-editor />
            } @else {
            <div class="editor-empty">
                <div class="editor-empty__icon">ğŸ“</div>
                <p class="editor-empty__text">SeleccionÃ¡ un capÃ­tulo para empezar a escribir</p>
            </div>
            }
        </div>

    </div>

    <!-- â”€â”€ RIGHT PANEL â€” AI CHAT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <app-ai-chat />

</div>