<div class="toolbar">
    <!-- Font selector -->
    <select class="toolbar__font-select" (mousedown)="saveSelection()" (change)="setFont($any($event.target).value)"
        aria-label="Fuente">
        @for (font of fonts; track font.value) {
        <option [value]="font.value">{{ font.label }}</option>
        }
    </select>

    <div class="toolbar__sep"></div>

    <!-- Formato de texto -->
    <button class="toolbar__btn" [class.active]="isBold()" (click)="toggleBold()" title="Negrita (Ctrl+B)"
        aria-label="Negrita">
        <strong>B</strong>
    </button>
    <button class="toolbar__btn toolbar__btn--italic" [class.active]="isItalic()" (click)="toggleItalic()"
        title="Cursiva (Ctrl+I)" aria-label="Cursiva">
        <em>I</em>
    </button>
    <button class="toolbar__btn toolbar__btn--underline" [class.active]="isUnderline()" (click)="toggleUnderline()"
        title="Subrayado (Ctrl+U)" aria-label="Subrayado">
        <u>U</u>
    </button>

    <div class="toolbar__sep"></div>

    <!-- Headings -->
    <button class="toolbar__btn" [class.active]="isH1()" (click)="toggleH1()" title="Título 1" aria-label="Título 1">
        H1
    </button>
    <button class="toolbar__btn" [class.active]="isH2()" (click)="toggleH2()" title="Título 2" aria-label="Título 2">
        H2
    </button>
    <button class="toolbar__btn" [class.active]="isBlockquote()" (click)="toggleBlockquote()" title="Cita"
        aria-label="Cita">
        ❝
    </button>

    <div class="toolbar__sep"></div>

    <!-- Símbolos especiales -->
    <div class="toolbar__symbols-wrapper">
        <button #symbolsBtn class="toolbar__btn" [class.active]="showSymbols()" (click)="toggleSymbols($event)"
            title="Insertar símbolo" aria-label="Símbolos">
            ✦ Ω
        </button>
        @if (showSymbols()) {
        <app-symbols-popup [top]="popupTop()" [left]="popupLeft()" (symbolSelected)="insertSymbol($any($event))"
            (close)="showSymbols.set(false)" />
        }
    </div>

    <!-- Separador + botón buscar -->
    <button class="toolbar__btn" [class.active]="state.searchOpen()" (click)="toggleSearch()" [disabled]="!editor"
        title="Buscar y reemplazar (Ctrl+F)" aria-label="Buscar en el documento">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
            aria-hidden="true" style="width:13px;height:13px">
            <circle cx="11" cy="11" r="8" />
            <line x1="21" y1="21" x2="16.65" y2="16.65" />
        </svg>
    </button>

    <!-- Separador + botón revisar -->
    <div class="toolbar__sep"></div>
    <button class="toolbar__btn toolbar__btn--check" (click)="checkSpelling()" [class.active]="lt.panelOpen()"
        [disabled]="!editor" title="Revisar ortografía y gramática" aria-label="Revisar texto">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
            stroke-linejoin="round" aria-hidden="true" style="width:13px;height:13px">
            <path d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10z" />
            <path d="m9 12 2 2 4-4" />
        </svg>
        Revisar
    </button>

    <!-- Idioma del corrector -->
    <div class="toolbar__spacer"></div>
    <select class="toolbar__lang-select" [value]="spellcheck.language()"
        (change)="spellcheck.setLanguage($any($event.target).value)" title="Idioma del corrector ortográfico"
        aria-label="Idioma del corrector">
        @for (lang of spellcheck.languages; track lang.code) {
        <option [value]="lang.code">{{ lang.label }}</option>
        }
    </select>
</div>